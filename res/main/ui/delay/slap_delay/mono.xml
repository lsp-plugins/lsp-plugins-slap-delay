<plugin resizable="true">
	<ui:set id="has_solo" value="
	    :s0 or :s1 or :s2 or :s3 or :s4 or :s5 or :s6 or :s7 or :s8 or :s9 or :s10 or :s11 or :s12 or :s13 or :s14 or :s15"/>
	<vbox spacing="4">
		<group text="groups.chan.master" ipadding="0" spacing="0">
			<grid rows="4" cols="16" bg.color="bg_schema">
				<!-- r1 -->

				<label text="labels.temperature" pad.h="6" pad.v="4" vreduce="true"/>
				<cell rows="4"><vsep bg.color="bg" pad.h="2" hreduce="true"/></cell>
				<label text="labels.predelay" pad.h="6" pad.v="4" vreduce="true"/>
				<cell rows="4"><vsep bg.color="bg" pad.h="2" hreduce="true"/></cell>
				<label text="labels.tempo" pad.h="6" pad.v="4" vreduce="true"/>
				<cell rows="4"><vsep bg.color="bg" pad.h="2" hreduce="true"/></cell>
				<label text="labels.stretch" pad.h="6" pad.v="4" vreduce="true"/>
				<cell rows="4"><vsep bg.color="bg" pad.h="2" hreduce="true"/></cell>
				<label text="labels.settings" pad.h="6" pad.v="4" vreduce="true"/>
				<cell rows="4"><vsep bg.color="bg" pad.h="2" hreduce="true"/></cell>
				<label text="labels.signal.pan" pad.h="6" pad.v="4" vreduce="true"/>
				<cell rows="4"><vsep bg.color="bg" pad.h="2" hreduce="true"/></cell>
				<label text="labels.signal.dry" pad.h="6" pad.v="4" vreduce="true"/>
				<label text="labels.signal.wet" pad.h="6" pad.v="4" vreduce="true"/>
				<cell rows="4"><vsep bg.color="bg" pad.h="2" hreduce="true"/></cell>
				<label text="labels.output" pad.h="6" pad.v="4" vreduce="true"/>

				<!-- r2 -->
				<ui:with bg.color="bg" pad.v="2" vreduce="true">
					<hsep/>
					<hsep/>
					<hsep/>
					<hsep/>
					<hsep/>
					<hsep/>
					<cell cols="2"><hsep/></cell>
					<hsep/>
				</ui:with>

				<!-- r3 -->
				<ui:with pad.h="6" pad.v="4">
					<knob id="temp"/>
					<knob id="pred"/>
					<vbox width.min="77" height.min="32" pad.h="0">
						<knob id="tempo" visibility="!:sync" pad="0"/>
						<indicator id="_time_bpm" format="f4.1!" pad="0" visibility=":sync" text_color="green"/>
					</vbox>
					<knob id="strch"/>
					<cell rows="2" pad="0">
						<grid rows="3" cols="1" fill="false" pad="0">
							<button id="mono" text="labels.signal.mono" size="10" width="42" ui:inject="Button_green"/>
							<button id="ramp" text="labels.ramp" size="10" width="42" ui:inject="Button_yellow"/>
							<ttap id="tempo" text="actions.tap" width="42" tcolor="label_text" visibility="!:sync"/>
						</grid>
					</cell>
					<knob id="p_in" scolor="balance"/>
					<knob id="dry" scolor="dry"/>
					<knob id="wet" scolor="wet"/>
					<knob id="g_out"/>
				</ui:with>

				<!-- r4 -->
				<ui:with pad.h="6" pad.b="4">
					<value id="temp"/>
					<value id="pred"/>
					<vbox fill="false" pad="0">
						<label text="labels.host_bpm" visibility=":sync"/>
						<value id="tempo" same_line="true" visibility="!:sync"/>
						<button id="sync" text="labels.sync" size="10" width="77" ui:inject="Button_green"/>
					</vbox>
					<value id="strch"/>
					<value id="p_in"/>
					<vbox fill="false" pad="0">
						<value id="dry" same_line="true" width="48"/>
						<button id="dm" text="labels.mute" size="10" ui:inject="Button_red"/>
					</vbox>
					<vbox fill="false" pad="0">
						<value id="wet" same_line="true" width="48"/>
						<button id="wm" size="10" text="labels.mute" ui:inject="Button_red"/>
					</vbox>
					<value id="g_out"/>
				</ui:with>
			</grid>
		</group>

		<graph width.min="256" height.min="256" expand="true" fill="true">
			<origin hpos="0" vpos="-1" visible="false"/>

			<!-- X -->
			<axis min="-100" max="100" color="graph_prim" angle="0.0" log="false" visibility="false"/>
			<!-- Y -->
			<axis min="-80 db" max="20 db" color="graph_prim" angle="0.5" log="true" visibility="false"/>

			<!-- Gray grid -->
			<!-- <ui:for id="g" first="-80" last="20" step="24"> -->
				<!-- <marker v="${g} db" color="graph_alt_1"/> -->
				<!-- <marker v="${g} db" ox="1" oy="0" color="graph_alt_1"/> -->
			<!-- </ui:for> -->

			<!-- Yellow grid -->
			<!-- <ui:for id="g" first="-80" last="20" step="24"> -->
				<!-- <marker v="${g} db" color="graph_sec"/> -->
				<!-- <marker v="${g} db" ox="1" oy="0" color="graph_sec"/> -->
			<!-- </ui:for> -->

			<!-- Axes and boundaries -->
			<!-- <marker v="1" ox="1" oy="0" dv="1" dx=":_a_width" dy=":_a_height" color="graph_alt_1" width="2" smooth="true"/>
			<marker v="24 db" color="graph_alt_1" visibility="false"/>
			<marker v="24 db" ox="1" oy="0" color="graph_alt_1" visibility="false"/> -->

			<!-- 0 dB markers -->
			<marker v="0 db" ox="0" oy="1" width="2" color="balance"/>
			<marker v="0 db" ox="1" oy="0" width="2" color="gain"/>

			<!-- Meshes -->
			<mesh id="ccg" width="3" color="graph_mesh" smooth="true"/>

			<ui:for id="i" first="0" last="15">
				<dot
					pointer="drag" x.editable="true" y.editable="true" z.editable="true"
					x.id="p${i}" y.id="dg${i}" z.id="gt${i}"
					size="1 + 3*:_ui_filter_point_thickness"
					hover.size="1 + 3*:_ui_filter_point_thickness"
					color=":xm_${i} ? 'gray_inactive' : 'graph_marker_cycle'"
					color.hue=":hue_${i}"
					border.size=":current_filter ieq ${i} ? 15 : 5"
					hover.border.size=":current_filter ieq ${i} ? 15 : 5"
					hover.color=":xm_${i} ? 'gray_inactive' : 'graph_marker_cycle'"
					hover.color.hue=":hue_${i}"
					bcolor=":xm_${i} ? 'gray_inactive' : 'graph_marker_cycle'"
					bcolor.hue=":hue_${i}"
					hover.bcolor=":xm_${i} ? 'gray_inactive' : 'graph_marker_cycle'"
					hover.bcolor.hue=":hue_${i}"
					x.astep="1" y.astep="1"
					visibility=":dm${i} ine 0"
				/>
			</ui:for>

			<dot x.id="elm_l" y.id="clm_l" color="graph_mesh" bcolor="graph_mesh" visibility="!:ssplit"/>
			<dot x.id="elm_l" y.id="clm_l" color="left" bcolor="left" visibility=":ssplit"/>
			<dot x.id="elm_r" y.id="clm_r" color="right" bcolor="right" visibility=":ssplit"/>

			<!-- Text -->
			<text x="0 db" y="0 db" text="0" halign="1" valign="1"/>
			<ui:attributes x="0 db" halign="1" valign="-1">
				<text y="24 db" text="graph.units.db"/>
				<text y="12 db" text="+12"/>
				<text y="-12 db" text="-12"/>
				<text y="-24 db" text="-24"/>
				<text y="-36 db" text="-36"/>
				<text y="-48 db" text="-48"/>
				<text y="-60 db" text="-60"/>
				<text y="-72 db" text="graph.axis.out" valign="1"/>
			</ui:attributes>

			<ui:attributes y="0 db" halign="-1" valign="1">
				<text x="-80" text="-100"/>
				<text x="0 db" text="Pan" halign="1"/>
				<text x="100" text="100"/>
			</ui:attributes>
		</graph>

		<cgroup id="lsel" text="Delay lines: " ipadding="0">
			<!-- 4 groups -->
			<ui:for id="g" first="0" last="3">
				<grid rows="22" cols="21" spacing="0">

					<cell rows="2"><label text="labels.specials.num" vreduce="true" pad.h="6"/></cell>
					<cell rows="22"><vsep bg.color="bg" pad.h="2" pad.t="4" pad.b="0" hreduce="true"/></cell>
					<cell rows="2"><label text="labels.mode"/></cell>
					<cell rows="2"><vsep bg.color="bg" pad.h="2" pad.t="4" pad.b="0" hreduce="true"/></cell>
					<cell rows="2"><label text="labels.delay"/></cell>
					<cell rows="2"><vsep bg.color="bg" pad.h="2" hreduce="true"/></cell>
					<label text="labels.signal.pan" pad.v="4"/>
					<cell rows="2"><vsep bg.color="bg" pad.h="2" hreduce="true"/></cell>
					<label text="labels.gain"/>
					<cell rows="22"><vsep bg.color="bg" pad.h="2" hreduce="true"/></cell>
					<cell rows="2"><label text="labels.filters" vreduce="true"/></cell>
					<cell rows="22"><vsep bg.color="bg" pad.h="2" hreduce="true"/></cell>
					<label text="labels.flt.low_cut" vreduce="true" pad.h="6"/>
					<cell rows="2"><vsep bg.color="bg" pad.h="2" hreduce="true"/></cell>
					<cell cols="5"><label text="labels.equalizer:db" vreduce="true"/></cell>
					<cell rows="2"><vsep bg.color="bg" pad.h="2" hreduce="true"/></cell>
					<label text="labels.flt.high_cut" pad.h="6"/>

					<ui:with pad.b="4">
						<label text="labels.units.:pc"/>
						<label text="labels.units.:db"/>
						<label text="labels.units.:hz"/>
						<label text="labels.flt.subs"/>
						<label text="labels.flt.bass"/>
						<label text="labels.flt.middle"/>
						<label text="labels.flt.presence"/>
						<label text="labels.flt.treble"/>
						<label text="labels.units.:hz"/>
					</ui:with>

					<ui:for id="i" first=":g*4" last=":g*4+3">
						<!-- Row 1 -->
						<ui:with bg.color="bg" pad.v="2" vreduce="true">
							<hsep/>
							<cell cols="7"><hsep/></cell>
							<hsep/>
							<cell cols="9"><hsep/></cell>
						</ui:with>

						<ui:with bright="!:dm${i} or :m${i} or ((${has_solo}) and !:s${i} and :dm${i}) ? 0.75 : 1.0" bg.bright="!:dm${i} or :m${i} or ((${has_solo}) and !:s${i} and :dm${i}) ? :const_bg_darken : 1.0">
							<cell rows="2"><label text="labels.specials.idx" text:id="${i}"/></cell>
							<cell rows="2">
								<grid rows="2" width="65" vfill="false" cols="3" pad.h="6">
									<cell cols="3"><combo id="dm${i}" pad.b="4"/></cell>
									<button id="s${i}" text="labels.chan.S_olo" size="19" ui:inject="Button_green_8"/>
									<button id="m${i}" text="labels.chan.M_ute" height="19" width="20" pad.h="4" ui:inject="Button_red_8"/>
									<button id="ph${i}" text="labels.signal.P_hase" size="19" ui:inject="Button_yellow_8"/>
								</grid>
							</cell>
							<cell rows="2"><void bg.color="bg_schema" width.max="4" hreduce="true"/></cell>
							<hbox pad.h="6" width.min="48">
								<knob id="dt${i}" visibility=":dm${i} ieq 1" scolor="!:dm${i} or :m${i} or ((${has_solo}) and !:s${i} and :dm${i}) ? 'cycle_inactive' : 'kscale'"/>
								<knob id="dd${i}" visibility="(:dm${i} ieq 0) or (:dm${i} ieq 2)" scolor="!:dm${i} or :m${i} or ((${has_solo}) and !:s${i} and :dm${i}) ? 'cycle_inactive' : 'kscale'"/>
								<frac id="df${i}" den.id="ds${i}" visibility=":dm${i} ieq 3" color="green"/>
							</hbox>
							<cell rows="2"><void bg.color="bg_schema" width.max="4" hreduce="true"/></cell>
							<knob id="p${i}" pad.h="6" scolor="!:dm${i} or :m${i} or ((${has_solo}) and !:s${i} and :dm${i}) ?  'cycle_inactive' : 'balance'"/>
							<cell rows="2"><void bg.color="bg_schema" width.max="4" hreduce="true"/></cell>
							<knob id="dg${i}" pad.h="6" scolor="!:dm${i} or :m${i} or ((${has_solo}) and !:s${i} and :dm${i}) ?  'cycle_inactive' : 'kscale'"/>
							<cell rows="2" fill="false">
								<vbox fill="false" pad.h="6" pad.v="4">
									<button id="lfc${i}" text="labels.flt.L_owC_ut" size="10" width.min="31" pad.b="4" ui:inject="Button_magenta_8"/>
									<button id="eq${i}" text="labels.flt.EQ_ualizer" size="10" width.min="31" pad.b="4" ui:inject="Button_green_8"/>
									<button id="hfc${i}" text="labels.flt.H_ighC_ut" size="10" width.min="31" ui:inject="Button_cyan_8"/>
								</vbox>
							</cell>

							<knob
								id="flc${i}"
								pad.h="6"
								size="20"
								scolor="(!:dm${i} or :m${i} or ((${has_solo}) and !:s${i} and :dm${i})) or !:lfc${i} ?  'cycle_inactive' : 'magenta'"
								bright="(!:dm${i} or :m${i} or ((${has_solo}) and !:s${i} and :dm${i})) or !:lfc${i} ? 0.75 : 1.0"
								bg.bright="(!:dm${i} or :m${i} or ((${has_solo}) and !:s${i} and :dm${i})) or !:lfc${i} ? :const_bg_darken : 1.0"/>
						</ui:with>
						<cell rows="2"><void bg.color="bg" width.max="4" hreduce="true"/></cell>
						<ui:with bright="!:dm${i} or :m${i} or ((${has_solo}) and !:s${i} and :dm${i}) ? 0.75 : 1.0" bg.bright="!:dm${i} or :m${i} or ((${has_solo}) and !:s${i} and :dm${i}) ? :const_bg_darken : 1.0">

							<ui:attributes size="20" pad.h="6" scolor="(!:dm${i} or :m${i} or ((${has_solo}) and !:s${i} and :dm${i})) or !:eq${i} ?  'cycle_inactive' : 'green'">
								<ui:with bright="(!:dm${i} or :m${i} or ((${has_solo}) and !:s${i} and :dm${i})) or !:eq${i} ? 0.75 : 1.0" bg.bright="(!:dm${i} or :m${i} or ((${has_solo}) and !:s${i} and :dm${i})) or !:eq${i} ? :const_bg_darken : 1.0">
									<knob id="fbs${i}"/>
									<knob id="fbb${i}"/>
									<knob id="fbm${i}"/>
									<knob id="fbp${i}"/>
									<knob id="fbt${i}"/>
								</ui:with>
							</ui:attributes>
						</ui:with>
						<cell rows="2"><void bg.color="bg" width.max="4" hreduce="true"/></cell>
						<ui:with bright="!:dm${i} or :m${i} or ((${has_solo}) and !:s${i} and :dm${i}) ? 0.75 : 1.0" bg.bright="!:dm${i} or :m${i} or ((${has_solo}) and !:s${i} and :dm${i}) ? :const_bg_darken : 1.0">
							<knob
								id="fhc${i}"
								pad.h="6"
								size="20"
								scolor="(!:dm${i} or :m${i} or ((${has_solo}) and !:s${i} and :dm${i})) or !:hfc${i} ?  'cycle_inactive' : 'kscale'"
								bright="(!:dm${i} or :m${i} or ((${has_solo}) and !:s${i} and :dm${i})) or !:hfc${i} ? 0.75 : 1.0"
								bg.bright="(!:dm${i} or :m${i} or ((${has_solo}) and !:s${i} and :dm${i})) or !:hfc${i} ? :const_bg_darken : 1.0"/>

							<!-- Row 2 -->

							<hbox width.min="48">
								<value id="dt${i}" visibility=":dm${i} ieq 1" same_line="true"/>
								<value id="dd${i}" visibility="(:dm${i} ieq 0) or (:dm${i} ieq 2)" same_line="true"/>
								<value id="df${i}" visibility=":dm${i} ieq 3" same_line="true" precision="3"/>
							</hbox>
							<ui:attributes detailed="false">
								<value id="p${i}"/>
								<value id="dg${i}"/>
								<value id="flc${i}" bright="(!:dm${i} or :m${i} or ((${has_solo}) and !:s${i} and :dm${i})) or !:lfc${i} ? 0.75 : 1.0" bg.bright="(!:dm${i} or :m${i} or ((${has_solo}) and !:s${i} and :dm${i})) or !:lfc${i} ? :const_bg_darken : 1.0"/>
								<ui:with bright="(!:dm${i} or :m${i} or ((${has_solo}) and !:s${i} and :dm${i})) or !:eq${i} ? 0.75 : 1.0" bg.bright="(!:dm${i} or :m${i} or ((${has_solo}) and !:s${i} and :dm${i})) or !:eq${i} ? :const_bg_darken : 1.0">
									<value id="fbs${i}"/>
									<value id="fbb${i}"/>
									<value id="fbm${i}"/>
									<value id="fbp${i}"/>
									<value id="fbt${i}"/>
								</ui:with>
								<value id="fhc${i}" bright="(!:dm${i} or :m${i} or ((${has_solo}) and !:s${i} and :dm${i})) or !:hfc${i} ? 0.75 : 1.0" bg.bright="(!:dm${i} or :m${i} or ((${has_solo}) and !:s${i} and :dm${i})) or !:hfc${i} ? :const_bg_darken : 1.0"/>
							</ui:attributes>
						</ui:with>
					</ui:for>
				</grid>
			</ui:for>
		</cgroup>
	</vbox>
</plugin>
